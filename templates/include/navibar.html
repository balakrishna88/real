<nav id="navbar" class="bg-white dark:bg-gray-800 w-[90%] md:w-[80%] rounded-[30px] shadow-md p-3 mx-auto mt-6">
    <div class="container mx-auto flex justify-between items-center">
        <!-- Logo (Left aligned) -->
        <a href="#" class="text-xl font-bold text-gray-800 dark:text-white">MyLogo</a>

        <!-- Menu for larger screens (Centered) -->
        <div class="flex-1 flex justify-center space-x-6 text-gray-600 dark:text-gray-300 font-medium">
            <a href="{% url 'home' %}" class="hover:text-blue-500 dark:hover:text-blue-400 transition-all duration-300">Home</a>
            <a href="{% url 'property_index' %}" class="hover:text-blue-500 dark:hover:text-blue-400 transition-all duration-300">Property</a>
            <a href="{% url 'group_list' %}" class="hover:text-blue-500 dark:hover:text-blue-400 transition-all duration-300">Groups</a>
            <a href="{% url 'service' %}" class="hover:text-blue-500 dark:hover:text-blue-400 transition-all duration-300">Find Services</a>

            <a href="{% url 'contact' %}" class="hover:text-blue-500 dark:hover:text-blue-400 transition-all duration-300">Contact</a>
        </div>

        <!-- Icons and Dropdown (Right aligned) -->
        <div class="flex items-center space-x-4">
            <button class="text-gray-600 dark:text-gray-300 hover:text-blue-500 dark:hover:text-blue-400 mt-2 transition-all duration-300">
                <span class="material-icons">search</span>
            </button>
            <button class="text-gray-600 dark:text-gray-300 hover:text-blue-500 dark:hover:text-blue-400 mt-2 transition-all duration-300">
                <span class="material-icons">account_circle</span>
            </button>
            
            <div class="relative">
                <!-- Dropdown Button -->
                <button id="dropdown-button" aria-haspopup="true" aria-expanded="false" class="px-4 py-2 mr-2 bg-blue-500 text-white dark:bg-blue-700 dark:text-gray-200 rounded-lg hover:bg-blue-600 dark:hover:bg-blue-600 focus:outline-none transition-all duration-300">
                    {% if user.is_authenticated %}
                        {{ user.username }} <!-- Show username if logged in -->
                    {% else %}
                        Sign In / Sign Up
                    {% endif %}
                </button>
            
                <!-- Dropdown Menu -->
                <div id="dropdown-menu" class="hidden absolute right-0 mt-2 bg-white shadow-lg rounded-lg w-48 dark:bg-gray-700 z-10">
                    {% if user.is_authenticated %}
                        <a href="{% url 'profile' %}" class="block px-4 py-2 text-gray-800 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-300">Profile</a>
                        <a href="{% url 'logout' %}" class="block px-4 py-2 text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-300">Logout</a>
                    {% else %}
                        <a href="{% url 'login' %}" class="block px-4 py-2 text-gray-800 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-300">Sign In</a>
                        <a href="{% url 'register' %}" class="block px-4 py-2 text-gray-800 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-300">Sign Up</a>
                    {% endif %}
                </div>
            </div>
            
        </div>
    </div>

    <!-- Mobile Menu Button (Hamburger Icon) -->
    <button id="menu-toggle" class="md:hidden text-gray-600 dark:text-gray-300 focus:outline-none">
        â˜°
    </button>

    <!-- Mobile Menu (Hidden by default) -->
    <div id="mobile-menu" class="hidden md:hidden flex flex-col space-y-3 mt-3 text-center">
        <a href="#" class="block p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-all duration-300">Home</a>
        <a href="#" class="block p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-all duration-300">Buy</a>
        <a href="#" class="block p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-all duration-300">Sell</a>
        <a href="#" class="block p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-all duration-300">Rent</a>
        <button class="px-4 py-2 bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-all duration-300">Sign In / Sign Up</button>
    </div>
</nav>

<!-- Mobile Menu Script (for toggling) -->
<!-- Place this script before the closing </body> tag -->
<script>
    document.addEventListener("DOMContentLoaded", () => {
        // Toggle mobile menu visibility
        const menuToggle = document.getElementById("menu-toggle");
        const mobileMenu = document.getElementById("mobile-menu");
        menuToggle.addEventListener("click", () => {
            mobileMenu.classList.toggle("hidden");
        });

        // Dropdown functionality for Sign In / Sign Up
        const dropdownButton = document.getElementById("dropdown-button");
        const dropdownMenu = document.getElementById("dropdown-menu");

        dropdownButton.addEventListener("click", () => {
            dropdownMenu.classList.toggle("hidden");
            const expanded = dropdownMenu.classList.contains("hidden");
            dropdownButton.setAttribute("aria-expanded", !expanded);
        });

        document.addEventListener("click", (event) => {
            if (!dropdownButton.contains(event.target) && !dropdownMenu.contains(event.target)) {
                dropdownMenu.classList.add("hidden");
                dropdownButton.setAttribute("aria-expanded", "false");
            }
        });

        // Theme Toggle Button
        const themeToggleButton = document.createElement('button');
        themeToggleButton.innerHTML = 'ðŸŒ™ / ðŸŒž';
        themeToggleButton.classList.add('px-4', 'py-2', 'bg-gray-200', 'rounded-lg', 'focus:outline-none', 'dark:bg-gray-700');

        document.querySelector('.container').appendChild(themeToggleButton);

        // Apply saved theme preference
        if (localStorage.getItem("theme") === "dark") {
            document.documentElement.classList.add("dark");
        }

        // Toggle theme and save preference
        themeToggleButton.addEventListener("click", () => {
            if (document.documentElement.classList.contains("dark")) {
                document.documentElement.classList.remove("dark");
                localStorage.setItem("theme", "light");
            } else {
                document.documentElement.classList.add("dark");
                localStorage.setItem("theme", "dark");
            }
        });
    });
</script>
