

{% block content %}
  <h1>Edit Property</h1>
  <form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    
    <!-- Property Form -->
    <h2>Property Information</h2>
    {{ property_form.as_p }}
    
    <!-- Image Upload Form -->
    <h2>Images</h2>
    <div class="form-group">
        <label for="id_images">Upload Images</label>
        <input type="file" name="images" id="id_images" multiple class="form-control-file">
    </div>

    <!-- Documents -->
    <h3>Documents</h3>
    <div class="form-group">
        <label for="id_documents">Upload Documents</label>
        <input type="file" name="documents" id="id_documents" multiple class="form-control-file">
    </div>

    <!-- Videos -->
    <h3>Videos</h3>
    <div class="form-group">
        <label for="id_videos">Upload Videos</label>
        <input type="file" name="videos" id="id_videos" multiple class="form-control-file">
    </div>
    
    <!-- Document Upload Form -->
    <h2>Documents</h2>
    {{ document_form.as_p }}
    
    <!-- Video Upload Form -->
    <h2>Videos</h2>
    {{ video_form.as_p }}
    
    <button type="submit">Save Changes</button>
  </form>

  <hr>

  <!-- Existing Files Section -->
  <h2>Existing Files</h2>

  <!-- Display Images -->
  <h3>Images</h3>
  <ul>
    {% for image in existing_images %}
      <li>
        <img src="{{ image.image.url }}" alt="Image" style="width: 200px; height: 150px;">
        <a href="{% url 'delete_property_file' file_type='image' file_id=image.id %}">Delete</a>
      </li>
    {% empty %}
      <li>No images uploaded.</li>
    {% endfor %}
  </ul>

  <!-- Display Documents -->
  <h3>Documents</h3>
  <ul>
    {% for document in existing_documents %}
      <li>
        <a href="{{ document.document.url }}" target="_blank">{{ document.document.name }}</a>
        <a href="{% url 'delete_property_file' file_type='document' file_id=document.id %}">Delete</a>
      </li>
    {% empty %}
      <li>No documents uploaded.</li>
    {% endfor %}
  </ul>

  <!-- Display Videos -->
  <h3>Videos</h3>
  <ul>
    {% for video in existing_videos %}
      <li>
        <video width="320" height="240" controls>
          <source src="{{ video.video.url }}" type="video/mp4">
          Your browser does not support the video tag.
        </video>
        <a href="{% url 'delete_property_file' file_type='video' file_id=video.id %}">Delete</a>
      </li>
    {% empty %}
      <li>No videos uploaded.</li>
    {% endfor %}
  </ul>
{% endblock %}
